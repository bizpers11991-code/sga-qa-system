{
  "workstream_id": "WS2",
  "title": "Navigation & Layout Architecture",
  "assigned_to": "Qwen 2.5 Coder 32B",
  "priority": "P0",
  "complexity": "Medium-High",
  "estimated_hours": 6,
  "dependencies": ["WS1"],
  "blocking": ["WS3", "WS4", "WS5", "WS6", "WS7", "WS8", "WS9", "WS10"],

  "objectives": [
    "Build responsive navigation system",
    "Create main layout architecture",
    "Implement React Router with protected routes",
    "Add role-based access control to navigation"
  ],

  "tasks": [
    {
      "id": "WS2-T1",
      "title": "Create App Shell Layout",
      "description": "Main layout wrapper that contains sidebar, topbar, and content area",
      "files_to_create": [
        "src/components/layout/AppShell.tsx"
      ],
      "requirements": {
        "responsive": true,
        "sidebar_collapsible": true,
        "mobile_drawer": true,
        "ipad_optimized": true
      }
    },
    {
      "id": "WS2-T2",
      "title": "Build Sidebar Navigation",
      "description": "Responsive sidebar with role-based menu items",
      "files_to_create": [
        "src/components/layout/Sidebar.tsx",
        "src/config/navigation.ts"
      ],
      "menu_structure": {
        "Dashboard": { "icon": "home", "path": "/", "roles": ["all"] },
        "Jobs": { "icon": "briefcase", "path": "/jobs", "roles": ["all"] },
        "Reports": { "icon": "document", "path": "/reports", "roles": ["all"] },
        "Incidents": { "icon": "alert", "path": "/incidents", "roles": ["all"] },
        "NCRs": { "icon": "clipboard", "path": "/ncr", "roles": ["engineer", "admin", "hseq"] },
        "Templates": { "icon": "template", "path": "/templates", "roles": ["engineer", "admin"] },
        "Resources": { "icon": "folder", "path": "/resources", "roles": ["all"] },
        "Admin": { "icon": "settings", "path": "/admin", "roles": ["admin"] }
      }
    },
    {
      "id": "WS2-T3",
      "title": "Create Top Bar Component",
      "description": "Header bar with SGA logo, user menu, notifications",
      "files_to_create": [
        "src/components/layout/TopBar.tsx",
        "src/components/layout/UserMenu.tsx",
        "src/components/layout/NotificationBell.tsx"
      ],
      "requirements": {
        "user_profile_dropdown": true,
        "logout_button": true,
        "notification_bell": true,
        "breadcrumbs": true
      }
    },
    {
      "id": "WS2-T4",
      "title": "Setup React Router v6",
      "description": "Configure routing with protected routes and role guards",
      "files_to_create": [
        "src/routing/routes.tsx",
        "src/routing/ProtectedRoute.tsx",
        "src/routing/RoleGuard.tsx"
      ],
      "routes": [
        { "path": "/", "component": "Dashboard", "protected": true },
        { "path": "/jobs", "component": "JobList", "protected": true },
        { "path": "/jobs/create", "component": "JobCreate", "protected": true, "roles": ["engineer", "admin"] },
        { "path": "/jobs/:id", "component": "JobDetail", "protected": true },
        { "path": "/reports", "component": "ReportList", "protected": true },
        { "path": "/reports/create", "component": "ReportCreate", "protected": true },
        { "path": "/incidents", "component": "IncidentList", "protected": true },
        { "path": "/incidents/create", "component": "IncidentCreate", "protected": true },
        { "path": "/ncr", "component": "NcrList", "protected": true, "roles": ["engineer", "admin", "hseq"] },
        { "path": "/admin", "component": "AdminPanel", "protected": true, "roles": ["admin"] }
      ]
    },
    {
      "id": "WS2-T5",
      "title": "Create Page Container Wrapper",
      "description": "Reusable container for page content with consistent padding/spacing",
      "files_to_create": [
        "src/components/layout/PageContainer.tsx",
        "src/components/layout/PageHeader.tsx"
      ]
    },
    {
      "id": "WS2-T6",
      "title": "Build Footer Component",
      "description": "App footer with version number and copyright",
      "files_to_create": [
        "src/components/layout/Footer.tsx"
      ],
      "requirements": {
        "version_number": true,
        "copyright_text": "Â© 2025 Safety Grooving Australia",
        "links": ["Privacy", "Terms", "Support"]
      }
    },
    {
      "id": "WS2-T7",
      "title": "Update App.tsx to use AppShell",
      "description": "Replace current simple layout with AppShell architecture",
      "files_to_modify": [
        "src/App.tsx"
      ]
    }
  ],

  "acceptance_criteria": [
    "Sidebar shows/hides on mobile/tablet",
    "Navigation items filtered by user role",
    "Protected routes redirect to login if not authenticated",
    "Breadcrumbs update based on current route",
    "User menu shows current user name and role",
    "Footer displays correct version number"
  ],

  "testing_requirements": [
    "Test navigation on mobile (< 640px)",
    "Test navigation on iPad (768px)",
    "Test navigation on desktop (> 1024px)",
    "Test role-based menu filtering",
    "Test protected route redirection"
  ],

  "deliverables": {
    "files": [
      "src/components/layout/AppShell.tsx",
      "src/components/layout/Sidebar.tsx",
      "src/components/layout/TopBar.tsx",
      "src/components/layout/UserMenu.tsx",
      "src/components/layout/NotificationBell.tsx",
      "src/components/layout/PageContainer.tsx",
      "src/components/layout/PageHeader.tsx",
      "src/components/layout/Footer.tsx",
      "src/routing/routes.tsx",
      "src/routing/ProtectedRoute.tsx",
      "src/routing/RoleGuard.tsx",
      "src/config/navigation.ts",
      "src/App.tsx (modified)"
    ],
    "documentation": "README_WS2.md with routing structure"
  }
}
